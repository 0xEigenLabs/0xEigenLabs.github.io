<!DOCTYPE html>
<html lang="en">

<head>
<title>Eigen zkVM Developer Documentation</title>

<meta name="generator" content="pandoc">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="icon" type="image/ico" href="/img/favicon.ico" />
<link rel="stylesheet" type="text/css" href="/css/github-markdown.min.css" />
<link rel="stylesheet" type="text/css" href="/css/main.css" />
</head>

<body>
<header>
  <a href="/"><img alt="Eigen zkVM logo" src="/img/logo.png" /></a>
</header>

<main>
<nav><div class="wrapper">
  <ul>
    <li><strong>Eigen Labs</strong></li>
    <li><a id="eigen-labs"   href="/guides/overview.html">Overview</a></li>
    <li><a id="eigen-apps"   href="/guides/application.html">Application</a></li>
  </ul>
  <ul>
    <li><strong>Eigen zkVM</strong></li>
    <li><a id="guides-zkvm"   href="/guides/zkvm.html">Eigen zkVM</a></li>
    <li><a id="guides-trustless-bridge"   href="/guides/trustless-bridge.html">Trustless Bridge</a></li>
    <li><a id="guides-eigen-prover"   href="/guides/prover.html">Eigen Prover</a></li>
    <li><a id="guides-eigen-zeth"   href="/guides/zeth.html">Eigen Zeth</a></li>
    <li><a id="guides-sequencer"   href="/guides/sequencer.html">Sequencer</a></li>
  </ul>
  <ul>
    <li><strong>Eigen Secret</strong></li>
    <li><a id="eigen-secret-overview"   href="/secret/overview.html">Overview</a></li>
    <li><a id="eigen-secret-send"   href="/secret/send.html">Send</a></li>
    <li><a id="eigen-secret-deployment"   href="/secret/deployment.html">Deployment</a></li>
    <li><a id="eigen-secret-integration"   href="/secret/integration.html">Integration</a></li>
  </ul>
  <ul>
    <li><strong>White Paper</strong></li>
    <!-- <li><a href="/api-docs">API Docs</a></li> -->
    <li><a id="whitepaper"   href="/whitepaper/overview.html">Overview</a></li>
  </ul>
</div></nav>

<section class="markdown-body">
<pre class="lynx">
    ___   
   /\__\  
  /:/__/_ 
 /::\/\__\
 \/\::/  /
   /:/  / 
   \/__/  
</pre>

<h1 id="eigen-prover">Eigen Prover</h1>
<p>Eigen zkVM Proving Service</p>
<h2 id="workspace-layout">Workspace Layout</h2>
<p>The work space is organized as below.</p>
<pre><code>basedir/
      _/executor/{task_id}/status
                         _/{task_name}.pil.json
                         _/{task_name}.cm
                         _/{task_name}.const
      _/proof/{task_id}/status
                      _/status.finished
                      _/{task_name}
                      _/batch_proof_{chunk_id}/
                                             _/{task_name}.verifier.circom
                                             _/{task_name}.verifier.zkin.json
                                             _/{task_name}.verifier.r1cs
                                             _/{task_name}.verifier_js/{task_name}.wasm
                                             _/{task_name}.verifier.pil
                                             _/{task_name}.verifier.pil.json
                                             _/{task_name}.verifier.exec
                                             _/{task_name}.verifier.cm
                                             _/{task_name}.verifier.const
                                             _/{task_name}.c12.circom
                                             _/{task_name}.c12.zkin.json
                                             _/{task_name}.c12.r1cs
                                             _/{task_name}.c12_js/{task_name}.wasm
                                             _/{task_name}.c12.pil
                                             _/{task_name}.c12.pil.json
                                             _/{task_name}.c12.exec
                                             _/{task_name}.c12.cm
                                             _/{task_name}.c12.const
                                             _/{task_name}.recursive1.circom
                                             _/{task_name}.recursive1.zkin.json
                                             _/{task_name}.recursive1.r1cs
                                             _/{task_name}.recursive1_js/{task_name}.recursive1.wasm
                                             _/{task_name}.recursive1.cm
                                             _/{task_name}.recursive1.const
                                             _/{task_name}.recursive1.exec
                                             _/{task_name}.recursive1.pil
                                             _/{task_name}.recursive1.pil.json
                      _/{id}_agg/agg_zkin.json
                      _/{id}_agg/agg_proof/
                                         _/{task_name}.recursive2.circom
                                         _/{task_name}.recursive2.zkin.json
                                         _/{task_name}.recursive2.r1cs
                                         _/{task_name}.recursive2_js/{task_name}.recursive2.wasm
                                         _/{task_name}.recursive2.cm
                                         _/{task_name}.recursive2.const
                                         _/{task_name}.recursive2.exec
                                         _/{task_name}.recursive2.pil
                                         _/{task_name}.recursive2.pil.json
                      _/{id}/snark_proof/
                                             _/g16.zkey
                                             _/verification_key.json
                                             _/proof.json
                                             _/public_input.json
</code></pre>
<h2 id="testing">Testing</h2>
<p>TASK=evm</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="bu">export</span> <span class="va">STARKJS=</span>/zkp/eigen-zkvm/starkjs</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="va">FORCE_BIT=</span>18 <span class="va">RUST_MIN_STACK=</span>2073741821 <span class="va">RUST_BACKTRACE=</span>1 <span class="va">RUST_LOG=</span>debug <span class="kw">\</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="va">CIRCOMLIB=$STARKJS</span>/node_modules/circomlib/circuits <span class="kw">\</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>    <span class="va">STARK_VERIFIER_GL=$STARKJS</span>/node_modules/pil-stark/circuits.gl <span class="kw">\</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>    <span class="va">STARK_VERIFIER_BN128=$STARKJS</span>/node_modules/pil-stark/circuits.bn128 <span class="kw">\</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>    <span class="ex">cargo</span> test --release integration_test -- --nocapture</span></code></pre></div>
<p>TASK=lr</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="bu">export</span> <span class="va">STARKJS=</span>/zkp/eigen-zkvm/starkjs</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="va">FORCE_BIT=</span>18 <span class="va">RUST_MIN_STACK=</span>2073741821 <span class="va">RUST_BACKTRACE=</span>1 <span class="va">RUST_LOG=</span>debug <span class="kw">\</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="va">CIRCOMLIB=$STARKJS</span>/node_modules/circomlib/circuits <span class="kw">\</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="va">STARK_VERIFIER_GL=$STARKJS</span>/node_modules/pil-stark/circuits.gl <span class="kw">\</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>    <span class="va">STARK_VERIFIER_BN128=$STARKJS</span>/node_modules/pil-stark/circuits.bn128 <span class="kw">\</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>    <span class="ex">cargo</span> test --release integration_test_lr -- --nocapture</span></code></pre></div>
<p>Note that the <code>FORCE_BIT</code> can be adjusted as per to different circuits. Taking Fibonacci as an example, the recursive proof process is shown in the figure below.</p>
<p>If you intend to enable the avx acceleration:</p>
<pre><code># for avx512
RUSTFLAGS=&#39;-C target-cpu=native&#39; FORCE_BIT=18 RUST_MIN_STACK=2073741821 RUST_BACKTRACE=1 RUST_LOG=debug \
    CIRCOMLIB=$STARKJS/node_modules/circomlib/circuits \
    STARK_VERIFIER_GL=$STARKJS/node_modules/pil-stark/circuits.gl \
    STARK_VERIFIER_BN128=$STARKJS/node_modules/pil-stark/circuits.bn128 \
    cargo test --release integration_test --features avx512

# for avx2 only (without avx512)
RUSTFLAGS=&#39;-C target-cpu=native&#39; FORCE_BIT=18 RUST_MIN_STACK=2073741821 RUST_BACKTRACE=1 RUST_LOG=debug \
    CIRCOMLIB=$STARKJS/node_modules/circomlib/circuits \
    STARK_VERIFIER_GL=$STARKJS/node_modules/pil-stark/circuits.gl \
    STARK_VERIFIER_BN128=$STARKJS/node_modules/pil-stark/circuits.bn128 \
    cargo test --release integration_test</code></pre>
<h2 id="proving-architecture">Proving Architecture</h2>
<center>
<img src="/img/zkvm/proving-architecture.png">
</center>
<h2 id="request-lifecycle">Request Lifecycle</h2>
<center>
<img src="/img/zkvm/eigen-prover/prover-dataflow.png">
</center>
<h2 id="deployment">Deployment</h2>
<p><a href="https://github.com/0xEigenLabs/eigen-prover?tab=readme-ov-file#server">Document</a></p>

<hr/>
<h4>See a mistake? Open a pull request.</h4>
<a href="https://github.com/0xEigenLabs/0xeigenlabs.github.io/blob/main/src/guides/prover.md">https://github.com/0xEigenLabs/0xeigenlabs.github.io/blob/master/src/guides/prover.md</a>
</section>
</main>

<footer id="footer">
  &copy;&nbsp;2024 EigenLabs Community<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">(Creative Commons Attribution-ShareAlike 4.0 International License)</a>
</footer>
</body>

</html>
